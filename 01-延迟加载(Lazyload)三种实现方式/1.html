<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>首先将页面上的图片的 src 属性设为 loading.gif，而图片的真实路径则设置在 data-src 属性中，页面滚动的时候计算图片的位置与滚动的位置，当图片出现在浏览器视口内时，将图片的 src 属性设置为 data-src 的值，这样，就可以实现延迟加载.</title>
<style>
	img {
		display: block;
		margin-bottom: 50px;
		height: 200px;
	}

</style>
</head>

<body>
<img src="images/loading.gif" data-src="images/1.jpg">
<img src="images/loading.gif" data-src="images/2.jpg">
<img src="images/loading.gif" data-src="images/3.jpg">
<img src="images/loading.gif" data-src="images/4.jpg">
<img src="images/loading.gif" data-src="images/5.jpg">
<img src="images/loading.gif" data-src="images/6.jpg">
<img src="images/loading.gif" data-src="images/7.jpg">
<img src="images/loading.gif" data-src="images/8.jpg">
<img src="images/loading.gif" data-src="images/9.jpg">
<img src="images/loading.gif" data-src="images/10.jpg">
<img src="images/loading.gif" data-src="images/11.jpg">
<img src="images/loading.gif" data-src="images/12.jpg">
<img src="images/loading.gif" data-src="images/13.jpg">
<img src="images/loading.gif" data-src="images/14.jpg">
<img src="images/loading.gif" data-src="images/15.jpg">
<img src="images/loading.gif" data-src="images/16.jpg">
<img src="images/loading.gif" data-src="images/17.jpg">
<img src="images/loading.gif" data-src="images/18.jpg">
<img src="images/loading.gif" data-src="images/19.jpg">
<img src="images/loading.gif" data-src="images/20.jpg">
<img src="images/loading.gif" data-src="images/21.jpg">

<script>
	function lazyload() {
	    var images = document.getElementsByTagName('img');
	    var len    = images.length;
	    var n      = 0;      //存储图片加载到的位置，避免每次都从第一张图片开始遍历		
	    return function() {
			var seeHeight = document.documentElement.clientHeight;
			var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
			for(var i = n; i < len; i++) {
				if(images[i].offsetTop < seeHeight + scrollTop) {
					if(images[i].getAttribute('src') === 'images/loading.gif') {
					 images[i].src = images[i].getAttribute('data-src');
				}
				n = n + 1;
				}
			}
	    }
	}
	var loadImages = lazyload();
	loadImages();          //初始化首页的页面图片
	window.addEventListener('scroll', loadImages, false); 
    </script>
</body>
</html>
